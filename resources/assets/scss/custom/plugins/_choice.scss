//
// Choise.scss
//

// Override for Choices.js styling using CSS variables
.choices {
    min-width: 150px;
    margin-bottom: 0;

    .choices__placeholder {
        opacity: 1;
        color: #{$input-placeholder-color};
    }

    // Custom styles
    .choices__inner {
        color: var(--#{$prefix}emphasis-color);
        background-color: var(--#{$prefix}secoundry-bg);
        padding: $input-padding-y $input-padding-x;
        border-color: var(--#{$prefix}border-color);
        border-radius: var(--#{$prefix}border-radius);
        font-size: $font-size-base;
        min-height: auto;

        // Small Sizes
        &.form-select-sm {
            padding: $form-select-padding-y-sm $form-select-padding-x-sm;
            font-size: $form-select-font-size-sm;
            border-radius: $form-select-border-radius-sm;
        }

        // Large Sizes
        &.form-select-lg {
            padding: $form-select-padding-y-lg $form-select-padding-x-lg;
            font-size: $form-select-font-size-lg;
            border-radius: $form-select-border-radius-lg;
        }

        .choices__list--single {
            padding: 0;
        }

        // Input
        .choices__input {
            padding: 0;
            margin-bottom: 0;
            background-color: var(--#{$prefix}input-bg-custom);

            &::placeholder {
                color: var(--#{$prefix}secondary-color);
            }
        }

        .choices__list {

            // Multiple
            &.choices__list--multiple {
                .choices__item {
                    background-color: var(--#{$prefix}primary-bg-subtle);
                    color: var(--#{$prefix}primary);
                    border-color: var(--#{$prefix}primary);

                    .choices__button {
                        position: relative;
                        opacity: 1;
                        background-image: none;
                        border: none;

                        &::before {
                            content: '';
                            position: absolute;
                            top: 50%;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            transform: translateY(-50%);
                            opacity: 0.6;
                            height: 80%;
                            border-left: 1px solid var(--#{$prefix}primary);
                            pointer-events: none;
                            // z-index: 1;
                        }

                        &::after {
                            content: '';
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;

                            mask-repeat: no-repeat;
                            mask-position: center;
                            -webkit-mask-repeat: no-repeat;
                            -webkit-mask-position: center;
                            background-color: var(--#{$prefix}primary);
                            $bg-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M11.9997 10.5865L16.9495 5.63672L18.3637 7.05093L13.4139 12.0007L18.3637 16.9504L16.9495 18.3646L11.9997 13.4149L7.04996 18.3646L5.63574 16.9504L10.5855 12.0007L5.63574 7.05093L7.04996 5.63672L11.9997 10.5865Z'%3E%3C/path%3E%3C/svg%3E");
                            mask-image: $bg-image;

                            z-index: 0;
                        }
                    }
                }
            }
        }
    }

    // Dropdown menu
    .choices__list {
        &.choices__list--dropdown {
            border-color: var(--#{$prefix}border-color);
            background-color: var(--#{$prefix}input-bg-custom);
            box-shadow: 0 4px 24px 0 rgba(62, 57, 107, 0.18);
            border-radius: $border-radius;
            z-index: $zindex-dropdown;
        }

        &[aria-expanded] {

            // Dropdown menu is open
            .choices__list {
                padding: $dropdown-padding-x $dropdown-padding-y;

                .choices__item {
                    border-radius: var(--#{$prefix}border-radius);
                    padding: $dropdown-item-padding-y $dropdown-item-padding-x;
                    background-color: var(--#{$prefix}input-bg-custom);

                    &:hover {
                        color: $dropdown-link-hover-color;
                        background-color: $dropdown-link-hover-bg;
                    }

                    &.is-selected {
                        color: $dropdown-link-active-color;
                        background-color: $dropdown-link-active-bg;
                    }

                }
            }
        }

    }

    .choices__heading {
        color: var(--#{$prefix}headings-color);
        border-bottom: 1px solid var(--#{$prefix}border-color);
    }

    &[data-type*=select-one] {

        // Single select
        .choices__input {
            border-color: var(--#{$prefix}border-color);
            background-color: $input-bg;
            padding: $input-btn-padding-y $input-btn-padding-x;
            font-size: $input-font-size-sm;

            &::placeholder {
                color: $input-plaintext-color;
            }
        }

        &::after {
            font-family: var(--#{$prefix}font-family-remix);
            content: "\ea4e";
            border: none;
            vertical-align: middle;
            font-size: 20px;
            line-height: 0;
            margin-top: 0;
            right: 30px;
            transform: translateY(-50%);
        }
    }

    // Open
    &.is-open {
        &[data-type*=select-one] {
            &::after {
                margin-top: 0;
                border: none;
                right: 11.5px;
                transform: translateY(-50%) rotate(180deg);
            }
        }
    }

}

// RTL
[dir="rtl"] {
    .choices {
        &[data-type*=select-one] {
            .choices__button {
                left: auto;
                right: 32px;
            }

            &::after {
                left: auto;
                right: 30px;
            }
        }

        &.is-open {
            &[data-type*=select-one] {
                &::after {
                    left: auto;
                    right: 11.5px;
                }
            }
        }
    }

    .choices__inner {
        .choices__list {
            &.choices__list--multiple {
                .choices__item {
                    .choices__button {
                        padding-right: 0;
                        padding-left: 20px;
                        margin: 0 -6px 0 8px;

                        &::before {
                            content: '';
                            right: auto;
                            left: 0;
                            border-right: 0;
                            border-left: 1px solid var(--#{$prefix}primary);
                        }
                    }
                }
            }
        }
    }
}
